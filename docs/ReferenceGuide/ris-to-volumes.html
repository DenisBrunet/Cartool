<HTML>

 <HEAD>
  <TITLE>Results of Inverse Solutions to Volume</TITLE>

  <meta content="en-us" http-equiv="Content-Language">

  <link rel="icon" type="image/x-icon" href="../favicon.ico">
  <link rel="stylesheet" href="../cartool.css" type="text/css">

    <style type="text/css">
.auto-style1 {
	text-align: center;
}
.auto-style4 {
	margin-left: 40px;
}
.auto-style5 {
	border-style: solid;
	border-width: 2px;
	margin-left: 40px;
}
.auto-style7 {
	border: 1px solid #DDDDDD;
	background-color: #DDDDDD;
}
.auto-style8 {
	border: 1px solid #DDDDDD;
	background-color: #999999;
}
.auto-style10 {
	border: 1px solid #DDDDDD;
}
.auto-style11 {
	text-align: left;
}
	</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HDBBL5LK8P"></script>
    <script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-HDBBL5LK8P');
    </script>
 </HEAD>

 <BODY>

	<div class="container">

	<object data="../cartool-menu.html" class="menu-iframe"></object>

         <H1>
             Results of Inverse Solutions to Volume</H1>
         <P>
             &nbsp;
         </P>
         <P>
             This toolbox will convert some <em>
                 <strong>
                     <a href="files-formats-cartool.html#ris">
                         .ris
                     </a>
                 </strong>
             </em> files, computed from <a href="computing-ris.html">
                 <strong>this toolbox</strong>
             </a>, into <a href="files-formats-others.html#mri">
                 <strong>volumes</strong>
             </a>. The aim is to be able to either <strong>
                 <a href="mri-display.html">display the results directly as volumes</a>
             </strong>,
             or to merge these results with other 3D modalities, like fMRI.
         </P>
         <P>
             &nbsp;
         </P>
         <h5>
             <a href="#dialog"><em>RIS to Volume</em>, from the Dialog</a><br>
             <a href="#cli"><em>RIS to Volume</em>, from the Command-Line Interface (CLI)</a><br>
         </H5>
         <H6>
                 <A HREF="#cli-options">CLI Options</A><br>
                 <A HREF="#cli-examples">CLI Examples</A><br>
         </H6>
         <H5>
             <A HREF="#technical-points-and-hints">Technical points &amp; hints</A>
         </h5>
         <h6>
             <A HREF="#grey-mask">Grey mask</A><br>
             <a href="#interpolation">Types of interpolation</a><br>
             <A HREF="#output-data-type">Output data types conversion</A><br>
         </h6>
         <h5>
             <a href="#results">Results</a>
         </h5>
         <H2>
             <a name="dialog"></a><em>RIS to Volume</em>, from the Dialog</H2>
         <p>
             Called from the&nbsp; <FONT FACE="Arial Black,Arial,Helvetica">
                 <A HREF="all-processings.html#tools">
                     Tools
                     | Inverse Solutions | Results of Inverse Solutions to Volumes
                 </A>
             </FONT>&nbsp; menu, the following dialog
             appears:</p>
         <p>
             &nbsp;
         </p>
         <p class="auto-style1">
             <img alt="MRIs Preprocessing Dialog" src="images/ris2vol.dialog.png" width="640">
         </p>
         <p>
             &nbsp;
         </p>
         <P>
             &nbsp;
         </P>
         <TABLE WIDTH="100%" CELLPADDING="2" CELLSPACING="0" BORDER="1">
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         <strong>Presets</strong>
                 </TD>
                 <TD WIDTH="74%" VALIGN=TOP>
                     <P>
                         You can quickly set the most important parameters according to some
                         predefined scenarios. Then check and adjust the parameters to your
                         liking.
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%"></TD>
                 <TD WIDTH="74%" VALIGN=TOP></TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         <B>(1) Volume Parameters</B>
                 </TD>
                 <TD WIDTH="74%" VALIGN=TOP>
                     <P>
                         Input and output volumes parameters.
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         <A NAME="dialog-grey-mask"></A>
                         <a href="#grey-mask">Grey Mask File:</a>
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         Give here the <strong>grey mask volume</strong> associated with the
                         <A HREF="computing-inverse-solution-matrices.html#SPs-extraction">Solution Points</A> of of the inverse solution at hand.
                     <P>
                         You can Drag &amp; Drop a
                         <a href="files-formats-others.html#mri"><strong>volume</strong></a> file here.
                     <P>
                         This is the mask <strong>where the results will be actually computed</strong>.
                         <em>Don't give the full brain, or even worse, the full head</em>, otherwise
                         you will have a lot of wrongful extrapolated values.
                     <P>
                         <A HREF="#grey-mask">See this note for more details.</A>
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         Solution Points File:
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         The <strong><A HREF="computing-inverse-solution-matrices.html#SPs-extraction">Solution Points</A> file</strong>, i.e. the positions in the
                         brain of the <em>
                             <strong>
                                 <a href="files-formats-cartool.html#ris">
                                     .ris
                                 </a>
                             </strong>
                         </em> files to be converted.
                     <P>
                         You can Drag &amp; Drop a <em>
                             <strong>
                                 <a href="files-formats-cartool.html#spi">
                                     .spi
                                 </a>
                             </strong>
                         </em> file here.
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         <a href="#interpolation">Interpolation Type:</a>
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         How to <strong>
                             compute all the intermediate voxels from the grey
                             mask
                         </strong>, given the sparse distribution of the solution points'
                         positions.
                     <P>
                         Pick one method from the list, sorted with increasing complexity and
                         visual quality.
                     <P>
                         <a href="#interpolation">See this note for more details.</a>
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%"></TD>
                 <TD WIDTH="74%" VALIGN=TOP></TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         <B>(2) Temporal Parameters</B>
                 </TD>
                 <TD WIDTH="74%" VALIGN=TOP>
                     <P>
                         &nbsp;
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         Processing All Data
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         Does what it tells, <strong>every data point</strong> from the <em>
                             <strong>
                                 <a href="files-formats-cartool.html#ris">
                                     .ris
                                 </a>
                             </strong>
                         </em> file will be sequentially converted to a volume.
                     <P>
                         Be warry of the space it could take on your disk (hint: 
						 a lot)!</TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         Only Time Interval:&nbsp;
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         Specify <strong>only a time interval to be converted</strong>. A much
                         safer option than processing all data!
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         From
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         From which <A HREF="terms-definitions-formulas.html#time-frame">time frame</A> (included)..
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         To
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         ..to which <A HREF="terms-definitions-formulas.html#time-frame">time frame</A> (included)..
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         by steps of:
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         ..by <A HREF="terms-definitions-formulas.html#time-frame">time frame</A> steps.
                     <P>
                         Data will be <strong>read by blocks of </strong><em><strong>steps</strong></em><strong>
                             size</strong>, then <strong>downsampled using a Median 
						 Filter</strong> on that block.<P>
                         Smaller steps will of course generated more data...
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%"></TD>
                 <TD WIDTH="74%" VALIGN=TOP></TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         <B>(3) Output Options</B>
                 </TD>
                 <TD WIDTH="74%" VALIGN=TOP>
                     <P>
                         &nbsp;
                 </TD>
             </tr>
             <tr>
                 <TD WIDTH="30%" VALIGN=TOP></TD>
                 <TD WIDTH="70%" VALIGN=TOP></TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         Optional Base File Name Prefix:
                 </TD>
                 <TD WIDTH="74%" VALIGN=TOP>
                     <P>
                         You can give a meaningful file name prefix for all the resulting files,
                         or leave it empty.
                     <P>
                         Cartool will also postfix each file name with the current block of
                         TFs.
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         <A HREF="#output-data-type">Output Data Type:</A>
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         You can write files with these <em>internal</em> types:<ul>
                             <li>
                                 <strong>unsigned bytes:</strong> smaller files, 
								 but loses precision
                             </li>
                             <li>
                                 <strong>floating points:</strong> bigger files, 
								 but saves the exact real input values</li>
                         </ul>
                     <P>
                         Single byte format files use less space, are faster, and could be good enough for display.
                         But this is <strong>strongly discouraged for anything like statistics 
						 or any other processing</strong>, due to the loss of 
						 precision during the conversion.
                     <P>
                         Floating point format files on the other hand take more space, but 
						 do reflect precisely your original data. Use this option
                         if you want to proceed with some statistics f.ex.</TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         Output File Type:
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         Pick from the list the <em>file format</em> you want to 
						 save your volumes to:<ul>
						 <li>Nifti or Analyze 7.5</li>
						 <li>Sequence of 3D files, or a single 4D file</li>
					 </ul>
                 </TD>
             </tr>
             <tr>
                 <TD VALIGN=TOP style="width: 32%">
                     <P>
                         Opening Results
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         Does what is says. However, Cartool will prevent from opening too many
                         files.
                 </TD>
             </tr>
             <tr>
                 <TD WIDTH="30%" VALIGN=TOP></TD>
                 <TD WIDTH="70%" VALIGN=TOP></TD>
             </tr>
             <tr>
                 <TD WIDTH="27%" VALIGN=TOP>
                     <P>
                         <B>Process Current</B>
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         Enabled when called from a <a href="eeg-display.html">Tracks (RIS) window</a>, the
                         preprocessing will apply only to <B>this file</B>.
                     </P>
                 </TD>
             </tr>
             <tr>
                 <TD WIDTH="27%" VALIGN=TOP>
                     <P>
                         <B>Batch Process</B>
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         Enabled when <I>not</I> called from a <a href="eeg-display.html">
                             Tracks (RIS)
                             window
                         </a>:
                     </P>
                     <UL>
                         <LI CLASS="mvd-P">
                             <P>
                                 Clicking this button will open a dialog from which you can select a <B>
                                     set
                                     of RIS files
                                 </B>, within a single directory.</P>
                         <LI CLASS="mvd-P">
                             <P>
                                 Using <B>Drag &amp; Drop</B>, you can drop files in the dialog and
                                 process them directly. Plus, it allows you to pick files <B>
                                     from
                                     different directories
                                 </B>, if you can select them through a handy
                                 utility like <I><A HREF="https://www.voidtools.com/">Everything</A></I> beforehand.</P>
                     </UL>
                 </TD>
             </tr>
             <tr>
                 <TD WIDTH="27%" VALIGN=TOP>
                     <P>
                         Cancel
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         Quit the dialog.
                 </TD>
             </tr>
             <tr>
                 <TD WIDTH="27%" VALIGN=TOP>
                     <P>
                         Help
                 </TD>
                 <TD WIDTH="73%" VALIGN=TOP>
                     <P>
                         Launch the Help to the right page (should be right here...).
                 </TD>
             </tr>
         </TABLE>
         <H2>
             <a name="cli"></a><em>RIS to Volume</em>, from the Command-Line Interface 
			 (CLI)
		 </H2>

         <H6>
                 <A HREF="#cli-options">CLI Options</A><br>
                 <A HREF="#cli-examples">CLI Examples</A><br>
                 <br>
         </H6>

		<h3>
             <a name="cli-options"></a>CLI Options
        </h3>
         <P>
             You can get the exact <em>RIS to Volume </em>subcommand 
			 options with:</P>
         <pre>cartool64.exe ristovolume --help</pre>
         <P>
             Which gives:
         </P>
         <pre>Ris-To-Volume command
Usage: Cartool64.exe ristovolume [OPTIONS] [files]

Positionals:
files FILES... List of files

Options:
--spfile FILE Needs: --greyfile
				Solution Points file (Required)
--greyfile FILE Needs: --spfile
				Grey Mask file (Required)
--timemin INTEGER 		Starting from time frame (Default:0)
--timemax INTEGER 		Ending at time frame (Default:EOF)
--timestep INTEGER 		Stepping by time frames (Default is 1)
--interpolation ENUM:{1NN,4NN,linear,cubickernel}
				Type of interpolation
<a href="command-line-interface.html#input-dir">--input-dir</a> PATH:DIR 		Input directory
<a href="command-line-interface.html#output-dir">--output-dir</a> PATH 		Output directory
--prefix TEXT 			Prefix added to the output file names
--file ENUM:{nifti,analyze} [nifti]
				File format
--type ENUM:{byte,float} [float]
				Internal file type
--dim ENUM:{3,4} [4] 		File dimensions
<a href="command-line-interface.html#verbose">--verbose</a> Excludes: --quiet 	Verbose mode
<a href="command-line-interface.html#quiet">--quiet</a> Excludes: --verbose 	Quiet mode
<a href="command-line-interface.html#overwrite">--overwrite</a> Excludes: --no-overwrite
				Overwrite existing files
<a href="command-line-interface.html#no-overwrite">--no-overwrite</a> Excludes: --overwrite
				Do not overwrite existing files
-h,--help 			This message</pre>
         <p>
             &nbsp;</p>
		<h3>
             <a name="cli-examples"></a>CLI Examples</h3>
         <P>
             Converting all time positions to a single 4D Nifti file:</P>
         <pre>cartool64.exe ristovolume --spfile=MNI152.NlinAsym20.6926.6mm.spi --greyfile=MNI152.NlinAsym20.Grey.nii -- &lt;files1.ris&gt;</pre>
         <P>
             Converting a given time range only, to a single 4D Nifti file:
         </P>
         <pre>cartool64.exe ristovolume --spfile=MNI152.NlinAsym20.6926.6mm.spi --greyfile=MNI152.NlinAsym20.Grey.nii --timemin=10 --timemax=20 -- &lt;files1.ris&gt;</pre>
         <P>
             Converting the full time range, but only by steps of 200 time 
			 frames:          </P>
         <pre>ccartool64.exe ristovolume --spfile=MNI152.NlinAsym20.6926.6mm.spi --greyfile=MNI152.NlinAsym20.Grey.nii --timestep=200 -- &lt;files1.ris&gt;</pre>
         <P>
             Converting the full time range, but only by steps of 200 time 
			 frames, to Nifti 3D &amp; byte storage files, and a file prefix:         </P>
         <pre>cacartool64.exe ristovolume --spfile=MNI152.NlinAsym20.6926.6mm.spi --greyfile=MNI152.NlinAsym20.Grey.nii --timestep=200 --file=nifti --type=byte --dim=3 --prefix=MyPrefix -- &lt;files1.ris&gt;</pre>
         <P>
             Converting the full time range, but only by steps of 200 time 
			 frames, to Analyze 3D &amp; byte storage files, and a file prefix:
         </P>
         <pre>cartool64.exe ristovolume --spfile=MNI152.NlinAsym20.6926.6mm.spi --greyfile=MNI152.NlinAsym20.Grey.nii --timestep=200 --file=analyze --type=byte --dim=3 --prefix=MyPrefix -- &lt;files1.ris&gt;&nbsp;</pre>
		<H2>
             <A NAME="technical-points-and-hints"></A>RIS to Volumes - Technical points &amp; hints
         </H2>

         <h6>
             <A HREF="#grey-mask">Grey mask</A><br>
             <a href="#interpolation">Types of interpolation</a><br>
             <A HREF="#output-data-type">Output data types conversion</A><br>
             <br>
         </h6>
         
         <h3>
             <A NAME="grey-mask"></A>Grey mask
         </h3>
         <P>
             The <A HREF="#dialog-grey-mask">grey mask provided</A> will constrain
             the outputs in some important ways.
         </P>
         <P>
             As a reminder, solution points are indeed a <A HREF="computing-inverse-solution-matrices.html#SPs-extraction">
                 downsampled
                 version of the grey mask
             </A> given during the
             <a href="computing-inverse-solution-matrices.html">computation of the inverse matrices</a>.
             So you must <strong>
                 use the same grey mask as the
                 one used during the Inverse Matrix creation!
             </strong> Ris files, Solution
             Points and grey mask should match altogether to guarantee an optimal
             <a href="#interpolation">interpolation</a>.
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             Here we can see how the grey mask and the solution points match (left), and
             and example of the interpolated results they can generate (right):
         </P>
         <P class="auto-style4">
             <img height="336" src="images/ris2vol.mask-grey-and-solpoints.png" width="347"><img height="336" src="images/ris2vol.mask-grey-and-solpoints-values.png" width="347">
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             If the mask provided is <strong>bigger than the original grey mask</strong>,
             then it will not be optimally covered by the solution points distribution. Voxels
             too far from any solution point will end up being extrapolated (instead of
             interpolated), <em>&quot;created from nothing&quot;</em> so to speak. <strong>
                 This is definitely something to be avoided.
             </strong>
         </P>
         <P>
             Here we can see (left) that the brain has been used instead of the grey mask,
             or worse (right) the full head. A lot of internal voxels (white matter
             f.ex.), or external voxels (outside the brain) are literally created <em>
                 ex
                 nihilo
             </em>:
         </P>
         <P class="auto-style4">
             <img height="336" src="images/ris2vol.mask-brain-and-solpoints-values.png" width="347"><img height="336" src="images/ris2vol.mask-head-and-solpoints-values.png" width="347">&nbsp;
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             In summary, use the correct <strong>
                 grey mask associated to the inverse
                 matrice's solution points
             </strong>. All other masks will generate some problems
             of their own (and who needs more problems?).
         </P>
         <h3>
             <a name="interpolation"></a>Types of interpolation
         </h3>
         <P>
             We can compute the value of any voxel that sits within a <A HREF="#grey-mask">
                 reasonable range of a set of solution points
             </A>. To do that, we need an
             <strong>interpolation formula that will combine the solution points' values</strong>,
             into a new value.
         </P>
         <P>
             <strong>Cartool provides 4 interpolation methods</strong>, all with 
			 their pros and
             cons. <em>There is no perfect method</em>, any of them is basically 
			 <em>creating</em>
             values where there were none beforehand. This is not specific to Cartool,
             inverse solutions or EEG itself, just a general consideration...
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             Here are the 
			 available interpolations in Cartool:</P>
         <P class="auto-style11">
             &nbsp;
         </P>
         <table cellpadding="8" cellspacing="1" class="auto-style5" style="width: 90%">
             <tr>
                 <td class="auto-style8" style="width: 18%"><strong>Method</strong></td>
                 <td class="auto-style7" style="width: 25%"><strong>What it does</strong></td>
                 <td class="auto-style7" style="width: 25%"><strong>Pros</strong></td>
                 <td class="auto-style7" style="width: 25%"><strong>Cons</strong></td>
             </tr>
             <tr>
                 <td class="auto-style7" style="width: 18%"><strong>1 Nearest Neighbor</strong></td>
                 <td class="auto-style10" style="width: 25%" valign="top">
                     The value from the <strong>
                         single closest solution point
                     </strong> is taken
                 </td>
                 <td class="auto-style10" style="width: 25%" valign="top">
                     No new values are created, you only 
					 spread your exact data<br><br><A HREF="#no-new-maxima">
					 <strong><em>No new maxima are being created</em></strong></A>
                 </td>
                 <td class="auto-style10" style="width: 25%" valign="top">
                     No new values are created, so not really an
                     interpolation..<br><br>Results look like little cubes - visual aspect is therefor not very engaging (unless you are into
                     <a href="https://en.wikipedia.org/wiki/Cubism">cubism</a>)
                 </td>
             </tr>
             <tr>
                 <td class="auto-style7" style="height: 99px; width: 18%"><strong>4 Nearest Neighbors</strong></td>
                 <td class="auto-style10" style="height: 99px; width: 25%" valign="top">
                     The values
                     from the <strong>4 closest solution points</strong> are taken, and
                     mixed up according to the inverse of their relative distances
                 </td>
                 <td class="auto-style10" style="height: 99px; width: 25%" valign="top">
                     This is
					 <a href="https://en.wikipedia.org/wiki/Nearest-neighbor_interpolation">
                         a
                         well-know interpolation method</a><br><br>This is the interpolation used for
                     the                      <a href="esi-display.html">display of inverse solutions</a><br><br>
                     <A HREF="#no-new-maxima">
                         <strong><em>No new maxima
                         are being created</em></strong>
                     </A>
                 </td>
                 <td class="auto-style10" style="height: 99px; width: 25%" valign="top">RResults 
				 don't look that great, and are a bit jagged or serrated.</td>
             </tr>
             <tr>
                 <td class="auto-style7" style="width: 18%"><strong>Linear/strong></td>
                 <td class="auto-style10" style="width: 25%" valign="top">
                     The values from the
                     <strong>8 solution points</strong> around a given voxel are taken, and
                     linearly mixed
                 <br>&nbsp;<br>&nbsp;</td>
                 <td class="auto-style10" style="width: 25%" valign="top">
                     This is
					 <a href="https://en.wikipedia.org/wiki/Trilinear_interpolation">
					 a well-known interpolation method</a><br><br>
                     <A HREF="#no-new-maxima"><strong><em>No new maxima are 
					 being created</em></strong></A>
                 </td>
                 <td class="auto-style10" style="width: 25%" valign="top">
                     RResults are smooth, but still look like 
					 little patches or blocks
                 </td>
             </tr>
             <tr>
                 <td class="auto-style7" style="width: 18%"><strong>Fast Cubic 
				 Kernels</strong></td>
                 <td class="auto-style10" style="width: 25%" valign="top">
                     It <strong>convolves the data with a big-enough
					 <a href="https://en.wikipedia.org/wiki/B-spline">Cubic B-spline-like 
					 Kernel</a></strong>. This is <em>not</em> a Cubic-Spline 
					 Interpolation, though.</td>
                 <td class="auto-style10" style="width: 25%" valign="top">
                     Best visual results<br><br>
                     <A HREF="#no-new-maxima">
                         <strong>No new
                         maxima are being created, </strong> <em><strong>with the Cartool implementation</strong></em>
                     </A>
                 </td>
                 <td class="auto-style10" style="width: 25%" valign="top">
                     Your colleagues will be jealous of these results - deal with
                     it
                 </td>
             </tr>
         </table>
         <P>
             &nbsp;
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             See here a side by side visual comparison of the 4 interpolations, <strong>1NN</strong> (top
             left), <strong>4NN</strong> (top right), <strong>Linear</strong> (bottom left) and
             <strong>Cubic Spline Kernel</strong> (bottom right):
         </P>
         <P class="auto-style4">
             <img height="336" SRC="images/ris2vol.interpolation-1nn.png" width="348"><img height="336" SRC="images/ris2vol.interpolation-4nn.png" width="348"><br>
             <img height="336" SRC="images/ris2vol.interpolation-linear.png" width="348"><img height="336" SRC="images/ris2vol.interpolation-cubic-spline.png" width="348">
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             &nbsp;
         </P>
         <P class="mvd-h6">
             <A NAME="no-new-maxima"></A>No <em>new maxima</em> policy
         </P>
         <P>
             The Cartool implementation of these interpolation methods has
             been done in such a way to ensure that <strong>
                 no new
                 maxima are being artificially created.</strong> <strong>This is a 
			 very important point</strong>, as f.ex. a <strong>
                 regular Cubic B-Spline
                 interpolation can and will generate new maxima, and can even 
			 create negative values out of
             </strong>positive-only input. <em>This is to be totally avoided</em>, 
			 as the maximum position can be of utmost importance, and 
			 artificially displacing it is not an option.</P>
		<P>
             Still note that the maxima from the generated volumes could be 
			 slightly lower that the ones from the <em>
                     <strong>
                         <a href="files-formats-cartool.html#ris">
                             .ris
                         </a>
                     </strong>
                 </em> files, as solution points usually do not fit exactly on 
			 voxels' centers.</P>
         <h3>
             <A NAME="output-data-type"></A>Output data type conversion
         </h3>
         <P>
             Cartool can currently write files with these <em>internal</em> types:
         </P>
         <ul>
             <li><strong>unsigned bytes:</strong> integer positive values, in the range [0..255]</li>
             <li>
                 <strong>floating points:</strong> the real values from the input <em>
                     <strong>
                         <a href="files-formats-cartool.html#ris">
                             .ris
                         </a>
                     </strong>
                 </em> files
             </li>
         </ul>
         <P>
             &nbsp;The global scaling of the original data will be preserved in 
			 both cases. But in the unsigned byte file format, expect to lose 
			 some numerical precision, as well as having lower graphical 
			 quality.<P>
             If you aim at doing statistics, or proceed with some more processing of your
             own, then save as floating points at the cost of bigger files. If you just
             aim for visualization, then you may use the unsigned byte version, which
             produces smaller files.
         </P>
         <H2>
             <a name="results"></a>RIS to Volumes - Results
         </H2>
         <UL>
             <LI CLASS="mvd-P">
                 <P>
                     Preprocessed files are written in the <B>same directories as their sources</B>.
                     <br>Output file names can have the user's <strong>prefix</strong>
                     added, and a <strong>postfix</strong> composed from the current <strong>
                         block of time frames
                     </strong>.<br>To remember that we are dealing with
                     volumes from <strong><em>.ris</em></strong>, the <strong>.ris</strong>
                     string is added before the file extension, too:<br>&nbsp;<strong>&lt;prefix&gt;.&lt;input file&gt;.TFXXX-YYY.ris.nii</strong> 
					 or <strong>.hdr</strong></P>
             <LI CLASS="mvd-P">
                 <P>
                     Verbose file <I><A HREF="files-formats-cartool.html#vrb"><B>.vrb</B></A></I>
                     (text), showing all the parameters.
                 </P>
         </UL>
         <P>
             &nbsp;
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             &nbsp;
         </P>
         <P>
             &nbsp;
         <P>
             &nbsp;
         <P>
             &nbsp;
     </div>
 </BODY>
</HTML>